<!DOCTYPE html>

<html>

<head>
    <meta charset="UTF-8">
    <title>Computer Lab Check</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href='https://unpkg.com/css.gg@2.0.0/icons/css/menu.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/assets/styles.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div
        class="min-h-screen min-w-screen bg-gradient-to-br from-[#0A0D5B] from-20% via-[#040C34] via-30% to-black to-50% ...">
        <!--Navbar-->
        <div class="w-full">
            <div
                class="px-4 py-4 flex justify-start items-center space-x-3 text-white text-[1.3rem] font-bold lg:text-[1.5rem]">
                <img class="w-[2rem] lg:w-[2.5rem]" src="/assets/img/sara-logo.png">
                <h4>Computer Lab</h4>
            </div>
        </div>
        <!--Register flex-->
        <div class="w-full mt-[150px] pl-5 text-white text-[20px] font-bold lg:mt-[50px] lg:flex lg:pl-0">
            <!--Students Log Desktop-->
            <div class="w-[50vw] justify-center pb-[50px] hidden lg:flex lg:pb-0">
                <div class="w-full h-[450px] overflow-y-auto mx-[60px] rounded-[20px]  bg-white/20">
                    <div
                        class="flex justify-start items-center text-white text-[20px] font-bold mx-5 mt-5 mb-3 lg:text-[30px]">
                        <h4>Students Log :</h4>
                    </div>
                    <div class="w-full h-[1px] bg-white/50"></div>
                    <div class="w-full px-4 flex justify-between my-5">
                        <div id="nameLogList_Desktop" class="text-white">
                        </div>
                        <div id="timeLogList_Desktop" class="text-white">
                        </div>
                    </div>
                </div>
            </div>
            <div class="w-full lg:w-[50vw] flex items-center lg:items-start lg:pl-[60px]">
                <h1 class="lg:text-[40px]">Register for LAB</h1>
                <div class="relative inline-block text-left">
                    <div
                        class="bg-gradient-to-r from-[#70A5FD] to-[#FD70C5] p-[3px] ml-2 rounded-[40px] lg:ml-7 lg:mt-[10px]">
                        <div class="flex items-center">
                            <button onclick="pressDropdown()" class="focus:outline-none">
                                <div class="bg-[#272727] px-[15px] rounded-[40px]">
                                    <h4 id="roomNumberLabel" class="text-white text-[12px] lg:text-[20px]">Select</h4>
                                </div>
                            </button>
                        </div>
                        <div id="dropdownmenu"
                            class="origin-top-right h-0 transition-all duration-[700ms] overflow-y-auto absolute right-0 mt-2 w-max rounded-md shadow-lg bg-[#272727] border-[0px] border-l-[#70A5FD] border-r-[#FD70C5] border-y-[#bb8be0]">
                            <!-- Dropdown items -->
                            <div class="py-1">
                                <button onclick="keepRoomNumber(123), pressDropdown()" href="#"
                                    class="px-4 py-2 text-sm text-white flex justify-center">123</button>
                                <button onclick="keepRoomNumber(125), pressDropdown()"
                                    class="px-4 py-2 text-sm text-white flex justify-center">125</button>
                                <button onclick="keepRoomNumber(126), pressDropdown()"
                                    class="px-4 py-2 text-sm text-white flex justify-center">126</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="absolute pl-[550px] mt-[150px] w-full">
                <!--Std Input Box Desktop-->
                <div id="stdNumberBox_Desktop" class="justify-center transition-all duration-[700ms] hidden lg:flex">
                    <div class="h-[130px] w-[350px] flex justify-center items-center ">
                        <div
                            class="absolute text-white text-end text-[50px] tracking-[40px] w-[250px] flex pl-[15px] items-center h-max">
                            <h1 id="dotLabel0_Desktop" class="">•</h1>
                            <h1 id="dotLabel1_Desktop" class="">•</h1>
                            <h1 id="dotLabel2_Desktop" class="">•</h1>
                            <h1 id="dotLabel3_Desktop" class="">•</h1>
                            <h1 id="dotLabel4_Desktop" class="">•</h1>
                        </div>
                        <input
                            class="relative rounded-[40px] pl-[45px] flex justify-center items-center text-[40px] tracking-[2rem] text-white font-bold h-full w-full  bg-transparent border-[3px] border-l-[#70A5FD] border-r-[#FD70C5] border-y-[#bb8be0] focus:outline-none"
                            type="number" name="idNumber" id="idNumber_Desktop" maxlength="5"
                            oninput="updateDotInput(value), submitToOutCheck(event), limitInputLength(event)">
                    </div>
                </div>
                <!--Note Box Desktop-->
                <div class="items-center hidden lg:flex justify-center">
                    <div class="text-[25px] text-white mr-[280px] flex items-center space-x-3 py-5">
                        <button onclick="addNote()" id="addnotecheck_Desktop" class="fa fa-circle-o"></button>
                        <div>
                            <h4 class="text-white font-bold text-[23px]">Add Note</h4>
                        </div>
                    </div>
                </div>
                <div id="notebox_Desktop" class="w-full justify-center items-start hidden">
                    <textarea id="note_Desktop" name="note"
                        class="h-max w-[350px] text-[20px] text-white bg-white/20 pl-[10px] rounded-[10px] resize-y focus:outline-none"
                        placeholder="Enter note..."></textarea>
                </div>
                <!--Submit Desktop-->
                <div class="w-full h-max justify-center items-center mt-[50px] hidden lg:flex">
                    <div id="submitBox_Desktop"
                        class="transition-all duration-[700ms] bg-white/50 from-[#21B914] to-[#257BCA] p-[3px] rounded-[40px]">
                        <button id="submit_Desktop" type="submit" onclick="submitFunc(event)"
                            class="w-[150px] lg:w-[200px] lg:py-[20px] max-h-[30px] overflow-hidden space-x-[5px] transition-all duration-[700ms] flex justify-between items-center px-5 p-[3px] rounded-[20px] bg-[#272727] text-white text-[20px] font-bold lg:text-[30px]">
                            <h4 id="submitText_Desktop">Login</h4>
                            <i id="submitIcon_Desktop" class="fa fa-arrow-right" aria-hidden="true"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!--Std Input Box Mobile-->
        <div id="stdNumberBox" class="mt-[40px] w-full flex justify-center transition-all duration-[700ms] lg:hidden">
            <div class="h-[100px] w-[270px] flex justify-center items-center ">
                <div
                    class="absolute text-white text-end text-[50px] tracking-[25px] w-[250px] flex pl-[40px] items-center h-max">
                    <h1 id="dotLabel0" class="">•</h1>
                    <h1 id="dotLabel1" class="">•</h1>
                    <h1 id="dotLabel2" class="">•</h1>
                    <h1 id="dotLabel3" class="">•</h1>
                    <h1 id="dotLabel4" class="">•</h1>
                </div>
                <input
                    class="relative rounded-[20px] pl-[50px] flex justify-center items-center text-[30px] tracking-[1rem] text-white font-bold h-full w-full  bg-transparent border-[3px] border-l-[#70A5FD] border-r-[#FD70C5] border-y-[#bb8be0] focus:outline-none"
                    type="number" name="idNumber" id="idNumber" maxlength="5"
                    oninput="updateDotInput(value), submitToOutCheck(event), limitInputLength(event)">
            </div>
        </div>
        <!--Note Box Mobile-->
        <div class="flex items-center lg:hidden">
            <div class="text-[25px] text-white pl-5 flex items-center space-x-3 py-5">
                <button onclick="addNote()" id="addnotecheck" class="fa fa-circle-o"></button>
                <div>
                    <h4 class="text-white font-bold text-[16px]">Add Note</h4>
                </div>
            </div>
        </div>
        <div id="notebox" class="w-full justify-center items-start hidden">
            <textarea id="note" name="note"
                class="h-max w-[270px] text-[12px] text-white bg-white/20 pl-[10px] rounded-[10px] resize-y focus:outline-none"
                placeholder="Enter note..."></textarea>
        </div>

        <!--Message Box-->
        <div id="message"
            class="hidden w-[60%] lg:w-[30%] h-max bg-[#ca253b] text-white text-[15px] lg:text-[20px] px-4 py-3 rounded-[20px] absolute bottom-5 right-5 shadow-md">

        </div>

        <!--Submit Mobile-->
        <div class="w-full h-max flex justify-center items-center mt-[50px] lg:hidden">
            <div id="submitBox"
                class="transition-all duration-[700ms] bg-white/50 from-[#21B914] to-[#257BCA] p-[3px] rounded-[20px]">
                <button id="submit" type="submit" onclick="submitFunc(event)"
                    class="w-[150px] max-h-[30px] overflow-hidden space-x-[5px] transition-all duration-[700ms] flex justify-between items-center px-5 p-[3px] rounded-[20px] bg-[#272727] text-white text-[20px] font-bold">
                    <h4 id="submitText">Login</h4>
                    <i id="submitIcon" class="fa fa-arrow-right" aria-hidden="true"></i>
                </button>
            </div>
        </div>

        <!--Students Log Mobile-->
        <div class="w-full flex justify-center mt-[300px] pb-[50px] lg:hidden">
            <div class="w-full overflow-y-auto max-h-[500px] h-max min-h-[150px] mx-5 rounded-[20px]  bg-white/20">
                <div class="flex justify-start items-center text-white text-[20px] font-bold mx-5 mt-5 mb-3">
                    <h4>Students Log :</h4>
                </div>
                <div class="w-full h-[1px] bg-white/50"></div>
                <div class="w-full px-4 flex justify-between my-5">
                    <div id="nameLogList" class="text-white">
                    </div>
                    <div id="timeLogList" class="text-white">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="bg-[#191919] min-h-[100px] lg:min-h-[150px] lg:grid lg:grid-cols-3 lg:gap-0.5">
        <div></div> <!-- col1 -->
        <div>
            <center class="py-[30px] lg:py-[50px]">
                <h4 class="text-white font-bold text-[10px] lg:text-[15px]">&copy; KanG49 Copyright 2023-2030</h4>
                <a href="https://github.com/kang49/" target="_blank"
                    class="text-white text-[10px]  lg:text-[15px]">Developed by Kankawee Aramrak M.6/6</a>
            </center>
        </div> <!-- col2 -->
        <div></div> <!-- col3 -->
    </footer>

</body>
<script>
    // Define the media query
    const mediaQuery = window.matchMedia('(min-width: 1024px)');

    // Check if the media query matches
    if (mediaQuery.matches) {
        console.log('1')
        // If screen width is more than 1024px
        //Convert element id to handle mobile and desktop
        var nameLogListEID = 'nameLogList_Desktop'
        var timeLogListEID = 'timeLogList_Desktop'
        var stdNumberBoxEID = 'stdNumberBox_Desktop'
        var idNumberEID = 'idNumber_Desktop'
        var addnotecheckEID = 'addnotecheck_Desktop'
        var noteboxEID = 'notebox_Desktop'
        var noteEID = 'note_Desktop'
        var submitEID = 'submit_Desktop'
        var submitBoxEID = 'submitBox_Desktop'
        var submitTextEID = 'submitText_Desktop'
        var submitIconEID = 'submitIcon_Desktop'
    } else {
        console.log('2')
        // If screen width is less than or equal to 1024px
        var nameLogListEID = 'nameLogList'
        var timeLogListEID = 'timeLogList'
        var stdNumberBoxEID = 'stdNumberBox'
        var idNumberEID = 'idNumber'
        var addnotecheckEID = 'addnotecheck'
        var noteboxEID = 'notebox'
        var noteEID = 'note'
        var submitEID = 'submit'
        var submitBoxEID = 'submitBox'
        var submitTextEID = 'submitText'
        var submitIconEID = 'submitIcon'
    }



    //global var
    var stdName;
    var isUserOut;


    //frontend script
    let labDropdownOpen = false;
    function pressDropdown() {
        labDropdownOpen = !labDropdownOpen;

        if (labDropdownOpen) {
            document.getElementById("dropdownmenu").classList.replace("h-0", "h-[100px]");
            document.getElementById("dropdownmenu").classList.replace("border-[0px]", "border-[3px]");

            document.getElementById(stdNumberBoxEID).classList.replace("mt-[40px]", "mt-[150px]");
        } else {
            document.getElementById("dropdownmenu").classList.replace("h-[100px]", "h-0");
            document.getElementById("dropdownmenu").classList.replace("border-[3px]", "border-[0px]");

            document.getElementById(stdNumberBoxEID).classList.replace("mt-[150px]", "mt-[40px]");
        }
    }

    //Keep room number
    var room;
    function keepRoomNumber(roomNumber) {
        room = roomNumber;
        document.getElementById("roomNumberLabel").innerHTML = `${room}`;
        console.log(room)
    }

    //Update Dot in StdNumber Input
    function updateDotInput(stdInput) {
        for (let i = 0; i < 5; i++) {
            if (stdInput[i]) {
                document.getElementById(`dotLabel${i}`).classList.add('text-transparent')
                document.getElementById(`dotLabel${i}_Desktop`).classList.add('text-transparent')
            }
            else {
                document.getElementById(`dotLabel${i}`).classList.remove('text-transparent')
                document.getElementById(`dotLabel${i}_Desktop`).classList.remove('text-transparent')
            }
        }
    }

    //Limit Std Number
    function limitInputLength(event) {
        const input = event.target;
        if (input.value.length > 5) {
            input.value = input.value.slice(0, 5);
        }
    }

    //Add Note Box
    var isAddNoteCheck = false;
    function addNote() {
        isAddNoteCheck = !isAddNoteCheck;
        if (isAddNoteCheck) {
            document.getElementById(addnotecheckEID).classList.replace("fa-circle-o", "fa-check-circle-o")
            document.getElementById(noteboxEID).classList.replace('hidden', 'flex');
        } else {
            document.getElementById(addnotecheckEID).classList.replace("fa-check-circle-o", "fa-circle-o")
            document.getElementById(noteboxEID).classList.replace('flex', 'hidden');
        }
    }

    //Submit when press enter
    document.addEventListener('DOMContentLoaded', function () {
        document.addEventListener('keydown', function (event) {
            if (event.key === 'Enter') {
                document.getElementById(submitEID).click();
            }
        });
    });

    // Define an array to hold user data
    let userLogs = [];
    let intervalIDArray = [];
    // Function to Add User Log in List
    function updateUserLogs(stdName, isLogOut) {
        let userIndex = userLogs.findIndex(user => user.name === stdName);

        if (userIndex !== -1) {
            if (isLogOut) {
                const timeLogList = document.getElementById(timeLogListEID).getElementsByTagName('h4');
                timeLogList[userIndex].classList.add('text-red-600');

                clearInterval(intervalIDArray[userIndex]);
                intervalIDArray[userIndex] = null;
            } else {
                // If user is found, update their data
                const currentUser = userLogs[userIndex];
                currentUser.time++;

                const timeLogList = document.getElementById(timeLogListEID).getElementsByTagName('h4');
                timeLogList[userIndex].textContent = formatTime(currentUser.time);
                timeLogList[userIndex].classList.remove('text-red-600');

                // Restart the timer for the existing user
                const timerInterval = setInterval(() => {
                    currentUser.time++;
                    timeLogList[userIndex].textContent = formatTime(currentUser.time);
                }, 1000);
                intervalIDArray[userIndex] = timerInterval;
            }
        } else {
            // If the user is not found, add a new entry
            const newUser = {
                name: stdName,
                time: 0,
            };

            userLogs.push(newUser);

            const newNameLog = document.createElement('h4');
            newNameLog.textContent = newUser.name;

            const newTimeLog = document.createElement('h4');
            newTimeLog.textContent = formatTime(newUser.time);

            const nameLogList = document.getElementById(nameLogListEID);
            const timeLogList = document.getElementById(timeLogListEID);

            nameLogList.appendChild(newNameLog);
            timeLogList.appendChild(newTimeLog);

            if (!isLogOut) {
                const timerInterval = setInterval(() => {
                    newUser.time++;
                    newTimeLog.textContent = formatTime(newUser.time);
                }, 1000);
                intervalIDArray.push(timerInterval);
            } else {
                intervalIDArray.push(null);
            }
        }
    }

    // Function to format time
    function formatTime(seconds) {
        const hours = Math.floor(seconds / 3600);
        const minutes = Math.floor((seconds % 3600) / 60);
        const remainingSeconds = seconds % 60;
        return `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')}`;
    }











    function submitToOutCheck(event) {
        document.getElementById(submitTextEID).innerHTML = "Login";
        try {
            document.getElementById(submitEID).classList.replace('lg:w-[450px]', 'lg:w-[200px]')
        } catch { }
        document.getElementById(submitEID).classList.replace('w-[300px]', 'w-[150px]')
        try {
            document.getElementById(submitBoxEID).classList.replace('bg-gradient-to-r', 'bg-white/50')
        } catch { }
        event.preventDefault();

        // Get the input values
        const idNumber = document.getElementById(idNumberEID).value;
        const xhttp = new XMLHttpRequest();

        // Send the ID number and note number to the PHP script
        const formData = new FormData();
        formData.append("idNumber", idNumber);
        xhttp.open("POST", "checkIn_or_out.php", true);
        xhttp.send(formData);

        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                // Handle the response from the PHP script
                try {
                    const response = JSON.parse(xhttp.responseText);
                    console.log(response.name, response.idInForm)
                    //Remove prefix
                    stdName = response.name.replace('นาย', '');
                    stdName = stdName.replace('นางสาว', '');
                    stdName = stdName.replace('นาง', '');
                    stdName = stdName.replace('เด็กชาย', '');
                    stdName = stdName.replace('เด็กหญิง', '');

                    if (response.idInForm == "out") {
                        isUserOut = true;
                        document.getElementById(submitTextEID).innerHTML = `Logout as ${stdName}`;
                        try {
                            document.getElementById(submitEID).classList.replace('lg:w-[200px]', 'lg:w-[450px]')
                        } catch { }
                        document.getElementById(submitEID).classList.replace('w-[150px]', 'w-[300px]')
                        document.getElementById(submitBoxEID).classList.replace('bg-white/50', 'bg-gradient-to-r');
                        document.getElementById(submitBoxEID).classList.replace("from-[#21B914]", "from-[#b91414]");
                        document.getElementById(submitBoxEID).classList.replace("to-[#257BCA]", "to-[#ca2588]");
                    }
                    if (response.idInForm == "in") {
                        isUserOut = false;
                        document.getElementById(submitTextEID).innerHTML = `Login as ${stdName}`;
                        try {
                            document.getElementById(submitEID).classList.replace('lg:w-[200px]', 'lg:w-[450px]')
                        } catch { }
                        document.getElementById(submitEID).classList.replace('w-[150px]', 'w-[300px]')
                        document.getElementById(submitBoxEID).classList.replace('bg-white/50', 'bg-gradient-to-r')
                        document.getElementById(submitBoxEID).classList.replace("from-[#b91414]", "from-[#21B914]");
                        document.getElementById(submitBoxEID).classList.replace("to-[#ca2588]", "to-[#257BCA]");
                    }
                } catch (e) {
                    console.log("Error: Failed to parse response from PHP script");
                    console.log(e)
                }
            }
        }
    }

    function submitFunc(event) {
        event.preventDefault();

        // Get the input values
        const idNumber = document.getElementById(idNumberEID).value;
        const note = document.getElementById(noteEID).value;
        room = room;
        const xhttp = new XMLHttpRequest();

        // Check if the required fields have values
        if (!idNumber || !room) {
            messagePopup = document.getElementById("message");
            messagePopup.innerHTML = 'โปรดกรอกข้อมูลให้ครบถ้วน';
            messagePopup.classList.replace('hidden', 'block');
            messagePopup.style.animation = 'slideInFromBottom 0.5s ease';
            setTimeout(function () {
                messagePopup.classList.replace('block', 'hidden');
                messagePopup.innerHTML = "";
            }, 5000);
            return;
        }

        // Send the ID number and note number to the PHP script
        const formData = new FormData();
        formData.append("idNumber", idNumber);
        formData.append("note", note);
        formData.append("room", room);
        xhttp.open("POST", "index.php", true);
        xhttp.send(formData);

        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                // Handle the response from the PHP script
                try {
                    const response = JSON.parse(xhttp.responseText);
                    if (response.status == "success") {
                        document.getElementById(idNumberEID).value = "";
                        document.getElementById(noteEID).value = "";
                        for (let i = 0; i < 5; i++) {
                            document.getElementById(`dotLabel${i}`).classList.remove('text-transparent')
                            document.getElementById(`dotLabel${i}_Desktop`).classList.remove('text-transparent')
                        }
                        if (isAddNoteCheck) {
                            document.getElementById(addnotecheckEID).classList.replace("fa-check-circle-o", "fa-circle-o")
                            document.getElementById(noteboxEID).classList.replace('flex', 'hidden');
                            isAddNoteCheck = false;
                        }
                        //Add to log list
                        const nameLogList = document.getElementById(nameLogListEID); // Select the parent element
                        var isfoundNameInList = false;
                        var foundIndex = -1;

                        // Loop through the h4 elements to find the name
                        for (let i = 0; i < nameLogList.children.length; i++) {
                            if (nameLogList.children[i].textContent === stdName) {
                                isfoundNameInList = true;
                                foundIndex = i;
                                break; // Once found, exit the loop
                            }
                        }

                        if (isfoundNameInList) {
                            if (isUserOut == false) {
                                updateUserLogs(stdName, false);
                            }
                            else {
                                updateUserLogs(stdName, true);
                            }
                        } else {
                            updateUserLogs(stdName, false);
                        }


                        //Animation
                        document.getElementById(submitTextEID).innerHTML = "Success";
                        document.getElementById(submitIconEID).classList.replace('fa-arrow-right', 'fa-check')
                        try {
                            document.getElementById(submitEID).classList.replace('lg:w-[450px]', 'lg:w-[200px]')
                        } catch { }
                        document.getElementById(submitEID).classList.replace('w-[300px]', 'w-[150px]')
                        document.getElementById(submitBoxEID).classList.replace('bg-gradient-to-r', 'bg-green-600')
                        setTimeout(function () {
                            document.getElementById(submitTextEID).innerHTML = "Login";
                            document.getElementById(submitIconEID).classList.replace('fa-check', 'fa-arrow-right')
                            document.getElementById(submitBoxEID).classList.replace('bg-green-600', 'bg-white/50')
                        }, 2000);
                    }
                    else if (response.noti === 'ไม่พบเลขห้องปฏิบัติการ ลองใหม่อีกครั้งคุณ') {
                        document.getElementById(idNumberEID).value = "";
                        document.getElementById(noteEID).value = "";
                        for (let i = 0; i < 5; i++) {
                            document.getElementById(`dotLabel${i}`).classList.remove('text-transparent')
                            document.getElementById(`dotLabel${i}_Desktop`).classList.remove('text-transparent')
                        }
                        if (isAddNoteCheck) {
                            document.getElementById(addnotecheckEID).classList.replace("fa-check-circle-o", "fa-circle-o")
                            document.getElementById(noteboxEID).classList.replace('flex', 'hidden');
                            isAddNoteCheck = false;
                        }
                        messagePopup = document.getElementById("message");
                        messagePopup.innerHTML = response.noti + " " + response.name;
                        messagePopup.classList.replace('hidden', 'block');
                        messagePopup.style.animation = 'slideInFromBottom 0.5s ease';
                        setTimeout(function () {
                            messagePopup.classList.replace('block', 'hidden');
                            messagePopup.innerHTML = "";
                        }, 5000);
                        document.getElementById(submitTextEID).innerHTML = "Login";
                        document.getElementById(submitBoxEID).classList.replace('bg-gradient-to-r', 'bg-white/50')
                    }
                    else {
                        messagePopup = document.getElementById("message");
                        messagePopup.innerHTML = 'เลขประจำตัวไม่ถูกต้อง';
                        messagePopup.classList.replace('hidden', 'block');
                        messagePopup.style.animation = 'slideInFromBottom 0.5s ease';
                        setTimeout(function () {
                            messagePopup.classList.replace('block', 'hidden');
                            messagePopup.innerHTML = "";
                        }, 5000);
                    }
                } catch (e) {
                    console.log(e)
                    document.getElementById("message").innerHTML = "Backend not response, Call Admin";
                }
            }
        };
    }
</script>